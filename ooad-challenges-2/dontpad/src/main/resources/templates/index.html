<!DOCTYPE html>
<html style="height: 100%;">
<head>
    <title>Interface Simples</title>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        #text {
            margin: auto;
	        font-family: Arial, Helvetica, Tahoma, Verdana;
	        font-size: 1rem;
	        width: 100%;
	        height: 100%;
	        padding: .6rem;
	        padding-bottom: 2rem;
	        border: none;
	        outline: none;
	        color: #111111;
	        resize: none;
	        overflow-y: scroll;
	        box-sizing: border-box;
        }
    </style>
</head>
<body>
    <textarea id="text"></textarea>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var textArea = document.getElementById('text');
            var path = window.location.pathname;

            function getText() {
                fetch('http://localhost:8080/path' + path)
                    .then(response => response.text())
                    .then(data => {
                        textArea.value = data;
                    });
            }
            
            getText();
            setInterval(getText, 2000);

            textArea.addEventListener('input', function() {
                var text = textArea.value;
                fetch('http://localhost:8080/path' + path, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'plain/text'
                    },
                    body: text
                });
            });
        });
    </script>
</body>
</html>
